<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è²“è²“è±¡æ£‹åœå¦</title>
    <style>
        :root { --bg-color: #ffe67a; }
        body { background-color: var(--bg-color); font-family: Arial, sans-serif; margin: 0; display: flex; flex-direction: column; align-items: center; min-height: 100vh; }
        
        header { font-size: 2rem; margin: 20px 0; font-weight: bold; }
        .nav-buttons { margin-bottom: 20px; }
        button { padding: 10px 20px; font-size: 1.1rem; cursor: pointer; border: none; border-radius: 5px; background: #333; color: white; margin: 0 10px; }
        
        /* æ£‹ç›¤å€åŸŸ */
        #game-board { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-bottom: 50px; }
        .piece { width: 60px; height: 60px; background: #fff; border: 2px solid #333; border-radius: 50%; display: flex; justify-content: center; align-items: center; font-size: 1.5rem; cursor: pointer; user-select: none; }
        .piece.flipped { background: #ddd; color: #d32f2f; }
        .piece.black { color: #000; }

        /* å¦è±¡/å‘½ç›¤é¡¯ç¤ºå€åŸŸ (åå­—æ’åˆ—) */
        #result-display { position: relative; margin-top: 50px; min-height: 400px; width: 300px; }
        .result-piece { position: absolute; width: 50px; height: 50px; border: 2px solid #333; border-radius: 50%; display: flex; justify-content: center; align-items: center; background: white; font-weight: bold; transition: transform 0.3s; }

        footer { margin-top: auto; padding: 20px; font-size: 0.9rem; }
        .hidden { display: none; }
    </style>
</head>
<body>

<header>ğŸ± æ™®é€šã„‰è²“</header>

<div class="nav-buttons">
    <button onclick="startMode('single')">å–®å¦</button>
    <button onclick="startMode('chart')">å‘½ç›¤</button>
</div>

<div id="game-board"></div>
<div id="result-display" class="hidden"></div>

<footer>IG: im._.cats</footer>

<script>
const piecesPool = ["å¸¥", "ä»•", "ä»•", "ç›¸", "ç›¸", "ä¿¥", "ä¿¥", "å‚Œ", "å‚Œ", "ç‚®", "ç‚®", "å…µ", "å…µ", "å…µ", "å…µ", "å…µ",
                    "å°‡", "å£«", "å£«", "è±¡", "è±¡", "è»Š", "è»Š", "é¦¬", "é¦¬", "åŒ…", "åŒ…", "å’", "å’", "å’", "å’", "å’"];
let currentMode = '';
let selectedPieces = [];
let shuffledPool = [];

function startMode(mode) {
    currentMode = mode;
    selectedPieces = [];
    shuffledPool = [...piecesPool].sort(() => Math.random() - 0.5);
    document.getElementById('result-display').innerHTML = '';
    document.getElementById('result-display').classList.add('hidden');
    renderBoard();
}

function renderBoard() {
    const board = document.getElementById('game-board');
    board.classList.remove('hidden');
    board.innerHTML = '';
    for (let i = 0; i < 32; i++) {
        const div = document.createElement('div');
        div.className = 'piece';
        div.onclick = () => flip(div, i);
        board.appendChild(div);
    }
}

function flip(el, index) {
    if (el.classList.contains('flipped')) return;
    
    const pieceName = shuffledPool[index];
    el.innerText = pieceName;
    el.classList.add('flipped');
    if ("å°‡å£«è±¡è»Šé¦¬åŒ…å’".includes(pieceName)) el.classList.add('black');
    
    selectedPieces.push(pieceName);

    if (currentMode === 'single' && selectedPieces.length === 5) {
        setTimeout(showResult, 500);
    } else if (currentMode === 'chart' && selectedPieces.length === 32) {
        setTimeout(showResult, 500);
    }
}

function showResult() {
    document.getElementById('game-board').classList.add('hidden');
    const display = document.getElementById('result-display');
    display.classList.remove('hidden');
    
    const centerX = 125, centerY = 50;
    const step = 60;

    selectedPieces.forEach((name, i) => {
        const p = document.createElement('div');
        p.className = 'result-piece';
        if ("å°‡å£«è±¡è»Šé¦¬åŒ…å’".includes(name)) p.style.color = 'black';
        else p.style.color = 'red';
        p.innerText = name;

        // è¨ˆç®—åº§æ¨™ (1ä¸­, 2å·¦, 3å³, 4ä¸Š, 5ä¸‹, 6ä¸‹ä¸‹...)
        let x = centerX, y = centerY;
        const n = i + 1;

        if (n === 1) { x = centerX; y = centerY; }
        else if (n === 2) { x = centerX - step; y = centerY; }
        else if (n === 3) { x = centerX + step; y = centerY; }
        else if (n === 4) { x = centerX; y = centerY - step; }
        else {
            // å¾ç¬¬5é¡†é–‹å§‹å¾€ä¸‹æ’
            const downStep = n - 4;
            y = centerY + (downStep * step);
            // è™•ç†å‘½ç›¤ 6, 7, 8 çš„å·¦å³é‚è¼¯
            if (currentMode === 'chart' && n > 5) {
                const group = Math.floor((n - 3) / 3); 
                const posInGroup = (n - 3) % 3; // 0:ä¸­, 1:å·¦, 2:å³
                // é€™è£¡ç°¡åŒ–é‚è¼¯ï¼š5, 6, 9, 12... ç‚ºä¸­è»¸
                // ä½ è¦æ±‚çš„ 7å·¦ 8å³...
                if (n === 7) { x = centerX - step; y = centerY + 2*step; }
                else if (n === 8) { x = centerX + step; y = centerY + 2*step; }
            }
        }
        
        // ç°¡æ˜“é‚è¼¯ä¿®æ­£ï¼šç›´æ¥å¥—ç”¨ä½ çš„ 1-9 é‚è¼¯
        const logicPos = [
            [0,0], [-1,0], [1,0], [0,-1], [0,1], // 1,2,3,4,5
            [0,2], [-1,2], [1,2], [0,3]          // 6,7,8,9
        ];
        
        if (n <= logicPos.length) {
            x = centerX + (logicPos[n-1][0] * step);
            y = centerY + (logicPos[n-1][1] * step);
        } else {
            // è¶…é 9 ä¹‹å¾Œç¹¼çºŒå¾€ä¸‹å»¶ä¼¸
            y = centerY + ( (n-6) * step); 
        }

        p.style.left = x + 'px';
        p.style.top = y + 'px';
        display.appendChild(p);
    });
}
</script>
</body>
</html>
